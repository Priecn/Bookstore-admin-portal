<div class="container">

  <div *ngIf="bookAdded" class="row">
    <div class="col-md-12">
      <div class="rectangle alert alert-success" role="alert">
        <h1>Book Added Successfully.</h1>
      </div>
    </div>

    <div class="col-md-12 text-center">
        <div class="btn-group" role="group">
            <a type="button" class="btn btn-primary" routerLink="/">Go Back To Home</a>
            <a type="button" class="btn btn-primary" (click)="bookAdded = false" style="color: white !important">Add Another Book</a>
        </div>
    </div>
  </div>

  <div *ngIf="!bookAdded" class="row">
    <div class="col-md-12">
      <div class="card rectangle">
        <div class="card-header rectangle">
          <h2>ADD NEW BOOK</h2>
        </div>
        <div class="card-body rectangle">
          <h5 class="card-title">
            New Book Information 
            <span style="font-size: small">
              * is a required field
            </span>
          </h5>

          <div class="card-text">
            <form [formGroup]="bookForm"
                  (ngSubmit)="onSaveBook()">
              <div class="form-row">
                <div class="form-group col-md-4">
                  <label for="title">Title*</label>
                  <input type="text" 
                         class="form-control rectangle"
                         placeholder="Title"
                         formControlName="title"
                         id="title"/>
                  <div class="invalid-feedback d-block"
                       *ngIf="bookForm.get('title').touched
                              && !bookForm.get('title').valid">
                        Title is required!
                      </div>
                </div>

                <div class="form-group col-md-4">
                  <label for="author">Author*</label>
                  <input type="text" 
                         class="form-control rectangle"
                         placeholder="Author"
                         formControlName="author"
                         id="author"/>
                  <div class="invalid-feedback d-block"
                       *ngIf="bookForm.get('author').touched
                              && !bookForm.get('author').valid">
                          Author is required!
                      </div>
                </div>
                
                <div class="form-group col-md-4">
                  <label for="publisher">Publisher*</label>
                  <input type="text" 
                         class="form-control rectangle"
                         placeholder="Publisher"
                         formControlName="publisher"
                         id="publisher"/>
                  <div class="invalid-feedback d-block"
                       *ngIf="bookForm.get('publisher').touched
                              && !bookForm.get('publisher').valid">
                          Publisher is required!
                      </div>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group col-md-4">
                  <label for="publicationDate">Publication Date</label>
                  <input type="date" 
                         class="form-control rectangle"
                         placeholder="Publication Date"
                         formControlName="publicationDate"
                         id="publicationDate"/>
                </div>

                <div class="form-group col-md-4">
                  <label for="category">Category</label>
                  <select class="custom-select rectangle"
                          formControlName="category"
                          id="category">
                      <option *ngFor="let cat of categories"
                              [value]="cat.value">
                          {{cat.name}}
                      </option>
                  </select>
                </div>
                
                <div class="form-group col-md-4">
                  <label for="format">Format</label>
                  <select class="custom-select rectangle"
                         formControlName="format"
                         id="format">
                      <option *ngFor="let f of formats"
                              [value]="f.value">
                          {{f.name}}
                      </option>
                  </select>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group col-md-3">
                  <label for="pages">Number Of Pages</label>
                  <input type="number" 
                         class="form-control rectangle"
                         placeholder="Number Of Pages"
                         formControlName="pages"
                         id="pages"
                         step="1"/>
                </div>

                <div class="form-group col-md-3">
                  <label for="isbn">ISBN*</label>
                  <input type="text" 
                         class="form-control rectangle"
                         placeholder="ISBN"
                         formControlName="isbn"
                         id="isbn"/>
                  <div class="invalid-feedback d-block"
                       *ngIf="bookForm.get('isbn').touched
                              && !bookForm.get('isbn').valid">
                          ISBN is required!
                      </div>
                </div>
                
                <div class="form-group col-md-3">
                  <label for="originalPrice">Original Price*</label>
                  <input type="number" 
                         class="form-control rectangle"
                         placeholder="Original Price"
                         formControlName="originalPrice"
                         id="originalPrice"
                         step="0.01"/>
                  <div class="invalid-feedback d-block"
                       *ngIf="bookForm.get('originalPrice').touched
                              && !bookForm.get('originalPrice').valid">
                          Original Price is required!
                      </div>
                </div>

                <div class="form-group col-md-3">
                  <label for="discountedPrice">Discounted Price*</label>
                  <input type="number" 
                         class="form-control rectangle"
                         placeholder="Discounted Price"
                         formControlName="discountedPrice"
                         id="discountedPrice"
                         step="0.01"/>
                  <div class="invalid-feedback d-block"
                       *ngIf="bookForm.get('discountedPrice').touched
                              && !bookForm.get('discountedPrice').valid">
                          Discounted Price is required!
                      </div>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group col-md-3">
                  <label for="weight">Shipping Weight*</label>
                  <input type="number" 
                         class="form-control rectangle"
                         placeholder="Shipping Weight"
                         formControlName="weight"
                         id="weight"
                         step="1"/> &nbsp;ounces&nbsp;
                  <div class="invalid-feedback d-block"
                      *ngIf="bookForm.get('weight').touched
                             && !bookForm.get('weight').valid">
                        Shipping Weight is required!
                  </div>
                </div>

                <div class="form-group col-md-3">
                  <label for="language">Language</label>
                  <select class="custom-select rectangle"
                         formControlName="language"
                         id="language">
                      <option *ngFor="let l of languages"
                              [value]="l.value">
                          {{l.name}}
                      </option>
                  </select>
                </div>
                
                <div class="form-group col-md-3">
                  <label for="numbersInStock">In Stock*</label>
                  <input type="number" 
                         class="form-control rectangle"
                         placeholder="Numbers in Stock"
                         formControlName="numbersInStock"
                         id="numbersInStock"
                         step="1"/>
                  <div class="invalid-feedback d-block"
                       *ngIf="bookForm.get('numbersInStock').touched
                              && !bookForm.get('numbersInStock').valid">
                          Numbers in Stock is required!
                      </div>
                </div>

                <div class="col-md-1">

                </div>

                <div class="custom-control custom-checkbox col-md-2" style="margin-top: 40px !important">
                  <input type="checkbox"
                         class="custom-control-input"
                         formControlName="isActive"
                         id="active"
                         checked>
                  <label class="custom-control-label"
                         for="active">
                          &nbsp; &nbsp; &nbsp; &nbsp; Activate
                  </label>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group col-md-8">
                  <label for="description">Description</label>
                  <textarea class="form-control rectangle"
                         placeholder="Enter Description"
                         formControlName="description"
                         id="description"
                         row="3"></textarea>
                </div>

                <div class="custom-file col-md-4 rectangle" 
                     style="margin-top: 56px !important;">
                  <input type="file" 
                         class="custom-file-input rectangle"
                         style="cursor: pointer !important;"
                         (change)="fileChangeEvent($event)"
                         id="image">
                  <label class="custom-file-label rectangle" 
                         for="image">Choose Image</label>
                </div>
              </div>

              <br>

              <div class="form-row">
                <div class="col-md-12">
                    <a type="button" class="btn btn-danger rectangle float-right" routerLink="/">Cancel</a>
                    <button type="submit" class="btn btn-primary rectangle" [disabled]="!bookForm.valid">Add Book</button>
                </div>
              </div>

            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
